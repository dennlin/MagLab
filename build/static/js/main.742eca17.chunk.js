(this["webpackJsonpmaglab-frontend"]=this["webpackJsonpmaglab-frontend"]||[]).push([[0],{162:function(t,e,n){},164:function(t,e,n){},185:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n(11),r=n.n(i),o=n(91),c=n(15),l=n(214),s=n(92),d=n(215),u=n(26),j=n(83),p=n(82),b=n(107),m=n(22),f=n(211),g=n(219),h=n(212),x=n(110),O=n.n(x),v=n(221),y=n(209),D=n(126),C=n(81),w=n(188),I=n(210),N=n(111),T=n.n(N).a.create({baseURL:"http://localhost:8000/",xsrfCookieName:"csrftoken",xsrfHeaderName:"x-csrftoken",validateStatus:function(){return!0}}),S=n(32),M=function(t,e){var n=Lt.length-1;if(t.forEach((function(t){t.pniFilename=parseInt(t.pniFilename),t.lat=parseFloat(t.lat),t.long=parseFloat(t.long)})),e){var a=t.map((function(t){return t.pniFilename})),i=Math.min.apply(Math,Object(S.a)(a)),r=(Math.max.apply(Math,Object(S.a)(a))-i)/n,o=t;return o.map((function(t){return t.pniFilename=Math.ceil(t.pniFilename/r-i/r)})),o}return t},k=n(112),B=n.n(k),R=Object(j.b)({reducers:{triggerIndividualData:function(t,e){var n=e.sensorId;t.individualSensorId=n},triggerAllData:function(){},triggerDownloadData:function(t,e){var n=e.sensorId;t.individualSensorId=n},setAllData:function(t,e){var n=e.payload;t.allData=M(n,!0)},setIndividualMagData:function(t,e){var n=e.payload;t.individualMagData=M(n,!0)},setDataReceived:function(t,e){var n=e.payload;console.log("payload data received",n),t.dataReceived=n}},initialState:{allData:[],individualMagData:[],individualSensorId:0,numSensors:0,dataReceived:!1},name:"magData",slice:"magData"}),A=R,L=function(t,e){return t.pipe(Object(v.a)(R.actions.triggerAllData),Object(y.a)(e),Object(D.a)((function(){return Object(C.a)(T.get("/api/newData")).pipe(Object(D.a)((function(t){return Object(w.a)(Object(I.a)(R.actions.setAllData(t.data)))})))})))},z=function(t,e){return t.pipe(Object(v.a)(R.actions.triggerIndividualData),Object(y.a)(e),Object(D.a)((function(t){var e=Object(c.a)(t,1)[0].payload;return Object(C.a)(T.get("/api/magData?sensorId=".concat(e))).pipe(Object(D.a)((function(t){return Object(w.a)(Object(I.a)(R.actions.setIndividualMagData(t.data)))})))})))},W=function(t,e){return t.pipe(Object(v.a)(R.actions.triggerDownloadData),Object(y.a)(e),Object(D.a)((function(t){var e=Object(c.a)(t,1)[0].payload;return Object(C.a)(T.get("/api/downloadData?magId=".concat(e,"&date=").concat(-1))).pipe(Object(D.a)((function(t){B()(t.data,"pni_".concat(e))})))})))},q=Object(m.a)(),F=Object(u.c)({router:Object(p.b)(q),magData:A.reducer}),E=Object(g.a)(),H=[Object(b.a)(q),E,O.a],Y=Object(j.a)({reducer:F,middleware:H});E.run((function(t,e,n){return Object(f.a)(L,z,W)(t,e,n).pipe(Object(h.a)((function(t,e){return e})))}));var P=n(190),U=n(213),J=Object(P.a)({root:{"&:hover":{backgroundColor:"#7a6ae2"}}})(U.a),_=n(3),G=Object(l.a)((function(t){return{root:function(){return{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",height:"80vh"}},title:function(t){return{display:"flex",alignItems:"flex-end",justifyContent:"flex-start",height:"30%",width:t.textBoxWidth}},titleText:function(){return{fontSize:35,fontWeight:"bold"}},body:function(e){var n=e.textBoxWidth;return{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",marginTop:t.spacing(5),width:n,height:"70%"}},button:function(e){return Object(s.a)(e),{backgroundColor:t.palette.secondary.main,borderRadius:"0.75em",marginTop:t.spacing(8),paddingTop:t.spacing(2.5),paddingBottom:t.spacing(2.5),paddingLeft:t.spacing(7),paddingRight:t.spacing(7),color:t.palette.primary.light,zIndex:0}},buttonText:function(t){return Object(s.a)(t),{fontSize:12}}}}));function K(){var t=G({textBoxWidth:"50%"});return Object(_.jsxs)("div",{className:t.root,children:[Object(_.jsx)("div",{className:t.title,children:Object(_.jsx)(d.a,{variant:"h1",className:t.titleText,children:Object(_.jsx)("strong",{children:"Welcome to Mag Lab!"})})}),Object(_.jsxs)("div",{className:t.body,children:[Object(_.jsx)(d.a,{variant:"body1",style:{fontSize:13},children:'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."'}),Object(_.jsx)(J,{className:t.button,onClick:function(){return q.push("/maps")},children:Object(_.jsx)(d.a,{variant:"body1",className:t.buttonText,children:"Observe Data"})})]})]})}var V=Object(l.a)((function(t){return{root:function(){return{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"100%",minHeight:"80vh",backgroundColor:t.palette.primary.main}},title:function(t){return{display:"flex",alignItems:"flex-start",flexDirection:"column",justifyContent:"flex-start",width:t.textBoxWidth}},titleText:function(){return{fontSize:35,fontWeight:"bold"}},titleDescription:function(){return{marginTop:t.spacing(3),width:"80%"}},image:function(){return{display:"flex",justifyContent:"center",width:"80%",flexWrap:"wrap",maxWidth:"400px",marginLeft:"auto",marginRight:"auto"}},imageContainer:function(t){return{width:t.imageContainerWidth}}}}));function Z(){var t=V({textBoxWidth:"50%",imageContainerWidth:"50%"});return Object(_.jsxs)("div",{className:t.root,children:[Object(_.jsx)("div",{className:t.imageContainer,children:Object(_.jsx)("img",{alt:"MagLab logo",className:t.image,src:"/magLabPhoto.png"})}),Object(_.jsxs)("div",{className:t.title,children:[Object(_.jsx)(d.a,{variant:"h1",className:t.titleText,children:Object(_.jsx)("strong",{children:"Our Mission"})}),Object(_.jsx)("div",{className:t.titleDescription,children:Object(_.jsx)(d.a,{variant:"body1",style:{fontSize:13},children:"Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."})})]})]})}var Q=Object(l.a)((function(t){return{root:function(){return{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%"}}}}));function X(){var t=Q();return Object(_.jsxs)("div",{className:t.root,children:[Object(_.jsx)(K,{}),Object(_.jsx)(Z,{})]})}var $=Object(l.a)((function(t){return{root:function(){return{height:"100vh",width:"100%",display:"flex",flexDirection:"column",overflowY:"scroll",backgroundColor:t.palette.primary.main}},topBar:function(){return{position:"sticky",top:"0px",width:"100%",backgroundColor:t.palette.primary.light}},mainPages:function(){return{height:"100%"}}}}));function tt(){var t=$();return Object(_.jsx)("div",{className:t.root,children:Object(_.jsx)("div",{className:t.mainPages,children:Object(_.jsx)(X,{})})})}var et=n(218),nt=n(124),at=n.n(nt),it=n(9),rt=n(36),ot=Object(l.a)((function(t){return{root:function(e){var n=e.spacingWidth;return{display:"flex",flexDirection:"row",width:"100%",paddingTop:t.spacing(n),paddingBottom:t.spacing(n),zIndex:100}},mainButton:function(t){var e=t.mainButtonWidth;return{display:"flex",width:"".concat(e,"%"),justifyContent:"flex-start"}},otherHeaders:function(t){var e=t.mainButtonWidth;return{display:"flex",width:"".concat(100-e,"%"),justifyContent:"flex-end"}}}}));function ct(){var t=ot({mainButtonWidth:20,spacingWidth:8});return Object(_.jsxs)("div",{className:t.root,children:[Object(_.jsx)("div",{className:t.mainButton,children:Object(_.jsx)(U.a,{onClick:function(){return q.push("/")},children:Object(_.jsx)(d.a,{variant:"overline",children:Object(_.jsx)("strong",{children:"Mag Lab"})})})}),Object(_.jsxs)("div",{className:t.otherHeaders,children:[Object(_.jsx)(U.a,{onClick:function(){return q.push("/home")},children:Object(_.jsx)(d.a,{variant:"overline",children:"Home"})}),Object(_.jsx)(U.a,{onClick:function(){return q.push("/maps")},children:Object(_.jsx)(d.a,{variant:"overline",children:"Map"})}),Object(_.jsx)(U.a,{children:Object(_.jsx)(d.a,{variant:"overline",children:"Sign up"})})]})]})}var lt=Object(l.a)((function(t){return{root:{display:"flex",flexDirection:"column",height:"100vh",width:"100%"},topBar:{position:"sticky",top:"0px",width:"100%",backgroundColor:t.palette.primary.light}}}));function st(t){var e=t.Component,n=lt();return Object(_.jsxs)("div",{className:n.root,children:[Object(_.jsx)("div",{className:n.topBar,children:Object(_.jsx)(ct,{})}),e]})}var dt=n(125),ut=(n(162),Object(l.a)((function(t){return{circle:function(t){return{backgroundColor:t.color,borderRadius:"50%",color:"#fff",height:"1em",width:"1em",position:"relative",border:"1px solid transparent"}},circleHover:{backgroundColor:"#0078d4",borderRadius:"50%",color:"#fff",height:"1em",width:"1em",position:"relative",border:"1px solid transparent"},circleText:{textAlign:"center",height:"70%",left:"50%",position:"absolute",top:"50%",transform:"translate(-50%, -50%)",width:"50%"}}}))),jt=function(t){var e=t.markerId,n=t.title,a=t.$hover,i=t.openInfo,r=t.weight,o={color:Lt[r]},c=ut(o);return Object(_.jsx)("div",{className:a?c.circleHover:c.circle,onClick:function(){i(e,n)},children:Object(_.jsx)("span",{className:c.circleText,title:n})})},pt=n(220),bt=n(222),mt=n(216),ft=n(217),gt=n(121),ht=n.n(gt),xt=Object(l.a)((function(t){return{root:{borderRadius:"2em",display:"flex",flexDirection:"column",zIndex:10,height:"50%",width:"25%",marginRight:t.spacing(2)},title:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginTop:t.spacing(3)},headerText:{fontSize:15,color:"light gray"},titleText:{fontSize:25},closeButton:{marginTop:t.spacing(1),marginLeft:t.spacing(1),display:"flex",justifyContent:"flex-start"},buttonContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginTop:t.spacing(2)},button:{margin:t.spacing(1)}}}));var Ot=Object(rt.c)((function(t){return{allData:t.magData.allData}}),(function(t){return Object(u.b)({triggerAllData:A.actions.triggerAllData,triggerIndividualData:A.actions.triggerIndividualData,triggerDownloadData:A.actions.triggerDownloadData},t)}))((function(t){var e,n=Object(a.useState)(!0),i=Object(c.a)(n,2),r=(i[0],i[1],Object(a.useState)(!1)),o=Object(c.a)(r,2),l=o[0],s=o[1],u=Object(a.useState)(),j=Object(c.a)(u,2),p=j[0],b=j[1],m=Object(a.useState)(),f=Object(c.a)(m,2),g=f[0],h=f[1];Object(a.useEffect)((function(){t.triggerAllData()}),[]);var x=function(t,e){t===p&&l?s(!1):(s(!0),b(t),h(e))},O=function(){var n=xt();return Object(_.jsx)(pt.a,{direction:"right",in:l,container:e,mountOnEnter:!0,unmountOnExit:!0,children:Object(_.jsxs)(bt.a,{className:n.root,children:[Object(_.jsx)("div",{className:n.closeButton,children:Object(_.jsx)(mt.a,{onClick:function(){return s(!1)},size:"small",children:Object(_.jsx)(ht.a,{})})}),Object(_.jsxs)(ft.a,{className:n.title,children:[Object(_.jsx)(d.a,{variant:"subtitle1",className:n.headerText,children:"Station Info."}),Object(_.jsx)(d.a,{variant:"h1",className:n.titleText,align:"left",children:g})]}),Object(_.jsxs)(ft.a,{children:[Object(_.jsxs)(d.a,{variant:"body1",align:"center",children:["Station Id: ",p]}),Object(_.jsxs)("div",{className:n.buttonContainer,children:[Object(_.jsx)(U.a,{variant:"outlined",className:n.button,onClick:function(){t.triggerIndividualData(p),q.push("/calendar")},children:"Go to calendar"}),Object(_.jsx)(U.a,{variant:"outlined",className:n.button,onClick:function(){t.triggerDownloadData(p)},children:"Download latest data"})]})]})]})})};return Object(_.jsxs)("div",{className:"App",children:[Object(_.jsx)(O,{}),Object(_.jsx)(dt.a,{gradient:zt,ref:function(t){return e=t},bootstrapURLKeys:{key:"AIzaSyCkKS6hb822mqUBntgJXInsCiw492xQRyM",language:"en",region:"US",libraries:"visualization"},defaultCenter:{lat:42.2808,lng:-83.732124},defaultZoom:3,yesIWantToUseGoogleMapApiInternals:!0,options:function(t){return{streetViewControl:!0,draggable:!0,zoomControlOptions:{position:9},keyboardShortcuts:!0,scaleControl:!0,scrollwheel:!0,mapTypeId:t.MapTypeId.ROADMAP,mapTypeControl:!0,mapTypeControlOptions:{style:t.MapTypeControlStyle.HORIZONTAL_BAR,position:t.ControlPosition.TOP_LEFT,mapTypeIds:[t.MapTypeId.ROADMAP,t.MapTypeId.TERRAIN,t.MapTypeId.SATELLITE,t.MapTypeId.HYBRID]}}},children:t.allData.map((function(t){var e=t.lat,n=t.long,a=t.username,i=t.id,r=t.pniFilename;return console.log(i,a),Object(_.jsx)(jt,{lat:e,lng:n,markerId:i,title:a,weight:r,openInfo:x},i)}))})]})})),vt=Object(l.a)((function(t){return{root:{display:"flex",flexDirection:"row",justifyContent:"center"},colorBox:{display:"flex",alignSelf:"center",height:t.spacing(2),width:t.spacing(4)}}}));function yt(){var t=vt();return Object(_.jsxs)("div",{className:t.root,children:[Object(_.jsx)(d.a,{style:{fontSize:10,marginRight:"2px"},children:"Low Activity"}),Lt.map((function(e,n){return Object(_.jsx)("div",{style:{background:e},className:t.colorBox},n)})),Object(_.jsx)(d.a,{style:{fontSize:10,marginLeft:"2px"},children:"High Activity"})]})}var Dt=Object(l.a)((function(t){return{root:{display:"flex",flexDirection:"column",height:"100%",width:"100%",justifyContent:"center",alignItems:"center",background:t.palette.primary.main},titleText:{fontSize:25,marginBottom:t.spacing(4)},aboveMap:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"center"},legend:{marginTop:t.spacing(1),display:"flex",justifyContent:"center"}}}));function Ct(t){var e=t.setDataReceived;Object(a.useEffect)((function(){e(!0)}),[]);var n=Dt();return Object(_.jsxs)("div",{className:n.root,children:[Object(_.jsx)("div",{className:n.aboveMap,children:Object(_.jsx)(d.a,{variant:"h1",className:n.titleText,children:Object(_.jsx)("strong",{children:"Nationwide Magnetometers"})})}),Object(_.jsx)(Ot,{}),Object(_.jsx)("div",{className:n.legend,children:Object(_.jsx)(yt,{})})]})}var wt=n(122),It=n.n(wt),Nt=(n(164),n(95)),Tt=n.n(Nt),St=n(123),Mt=function(t){return t&&t.date?{"data-tip":"".concat(t.date.toString().slice(0,10)," has count: ").concat(t.count)}:null};var kt=Object(rt.c)((function(t){return{magData:t.magData.individualMagData}}))((function(t){var e=Tt()().format("YYYY-MM-DD"),n=new Date("2021-03-01"),a=new Date(e),i=function(t,e,n){for(var a=t.map((function(t){return{date:Tt()(new Date(t.datetime)).format("YYYY-MM-DD"),count:t.pniFilename}})),i=e;i<=n;)return a}(t.magData,new Date(n),a);return Object(_.jsxs)("div",{children:[Object(_.jsx)(It.a,{startDate:n,endDate:a,values:i,tooltipDataAttrs:Mt,classForValue:function(t){return t?"color-scale-".concat(t.count):"color-empty"}}),Object(_.jsx)(yt,{}),Object(_.jsx)(St.a,{})]})})),Bt=Object(l.a)((function(t){return{root:{display:"flex",flexDirection:"column",height:"100%",width:"100%",justifyContent:"center",alignItems:"center",background:t.palette.primary.main},titleText:{fontSize:25,marginBottom:t.spacing(4)},aboveMap:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"center"},calendarSizeContainer:{width:"80%",height:"50%"}}}));function Rt(){var t=Bt();return Object(_.jsxs)("div",{className:t.root,children:[Object(_.jsx)("div",{className:t.aboveMap,children:Object(_.jsx)(d.a,{variant:"h1",className:t.titleText,children:Object(_.jsx)("strong",{children:"Calendar"})})}),Object(_.jsx)("div",{className:t.calendarSizeContainer,children:Object(_.jsx)(kt,{})})]})}var At=at()({palette:{type:"light",primary:{main:"#F1F2F6",light:"#ffffff"},secondary:{main:"#27197E"}},spacing:4,typography:{fontFamily:"Noto Sans"}}),Lt=["rgb(0, 42, 255)","rgb(133, 0, 231)","rgb(180, 0, 204)","rgb(211, 0, 175)","rgb(232, 0, 146)","rgb(244, 0, 118)","rgb(250, 0, 91)","rgb(250, 0, 66)","rgb(246, 0, 42)","rgb(238, 13, 13)"];var zt=function(t){var e=Object(a.useState)(!1),n=Object(c.a)(e,2),i=n[0],r=n[1];return Object(_.jsx)(et.a,{theme:At,children:Object(_.jsx)(rt.a,{store:Y,children:Object(_.jsx)(p.a,{history:q,children:Object(_.jsxs)(it.d,{children:[Object(_.jsx)(it.b,{exact:!0,path:"/home",children:Object(_.jsx)(st,{Component:Object(_.jsx)(tt,{})})}),Object(_.jsx)(it.b,{exact:!0,path:"/maps",children:Object(_.jsx)(st,{Component:Object(_.jsx)(Ct,{setDataReceived:r})})}),Object(_.jsx)(it.b,{exact:!0,path:"/calendar",children:i?Object(_.jsx)(st,{Component:Object(_.jsx)(Rt,{})}):Object(_.jsx)(it.a,{to:"/maps"})}),Object(_.jsx)(it.b,{path:"/",children:Object(_.jsx)(st,{Component:Object(_.jsx)(tt,{})})})]})})})})};r.a.render(Object(_.jsx)(o.a,{children:Object(_.jsx)(zt,{})}),document.getElementById("root"))}},[[185,1,2]]]);
//# sourceMappingURL=main.742eca17.chunk.js.map